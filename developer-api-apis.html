<!DOCTYPE html>
<html lang="en">
	<title>Developer api apis - WordPress Social Login</title>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link href="http://fonts.googleapis.com/css?family=Roboto:100,200,300,400,700|Roboto+Condensed:400,700" rel="stylesheet" type="text/css">

	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="assets/css/prettify.css" rel="stylesheet">
	<link href="assets/css/style.css" rel="stylesheet">

	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="assets/js/prettify.js"></script>
	<script type="text/javascript" src="assets/js/script.js"></script>
</head>
<body id="documentation">
	<header>
		<nav class="navbar navbar-fixed-top">
			<div class="navbar-header">
				<a class="navbar-brand" href="./index.html">WordPress Social Login</a>
			</div>

			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav navbar-right">
					<li><a href="./overview.html">Overview</a></li>
					<li class="active"><a href="./documentation.html">Documentation</a></li>
					<li><a href="./getinvolved.html">Get involved</a></li>
					<li><a href="./support.html">Support</a></li>
					<li><a href="./faq.html">FAQ</a></li>
					<li style="margin-right:10px">
						<form action="./search.html" method="get">
							<input type="text" name="q" class="search-input" placeholder="Search">
						</form>
					</li>
				</ul>
			</div>
		</nav>
	</header>


	<div id="content" class="container container-documentation">
		<div class="block row">
			<div class="col col-md-12">

<div class="alert alert-danger">
	<h4 style="border: 0;">Important</h4>

	<p style="font-size: 20px;">
		Direct access to providers apis is newly introduced into WSL and we are still experimenting. Things might change in upcoming releases.
	</p>
</div>

<h1>Access Social APIs <small>Developer API</small></h1>

<h3>1. Access through PHP code</h3>

<p>
	Expect for the OpenID ones, to access any of the social networks apis, you may invoke the Hybridauth library at any point during the second phase of the authentication process (see, <a href="developer-api-authentication.html">Authentication Process</a>).
</p>

<p>
	Note that after the user is redirected to <code>Redirect URL</code>, WSL will clear the PHP session, which will interpret the connexion to the provider api and it will be no longer possible make signed api calls.
</p>

<p>
	The snippets below shows how to access Twitter and Facebook apis:
</p>

<pre class="prettyprint linenums">
function get_user_twitter_timeline( $user_id, $provider, $hybridauth_user_profile )
{
    if( 'Twitter' != $provider )
    {
        return;
    }

    include_once( WORDPRESS_SOCIAL_LOGIN_ABS_PATH . '/hybridauth/Hybrid/Auth.php' );

    try
    {
        $provider = Hybrid_Auth::getAdapter( 'Twitter' );

        # https://dev.twitter.com/rest/reference/get/statuses/user_timeline
        $response = $provider->api()->get( 'https://api.twitter.com/1.1/statuses/user_timeline.json' );
    }
    catch( Exception $e )
    {
        echo "Ooophs, we got an error: " . $e->getMessage();
    }
}
add_filter( 'wsl_hook_process_login_before_wp_set_auth_cookie', 'get_user_twitter_timeline', 10, 3 );
</pre>

<br />
<pre class="prettyprint linenums">
function get_post_to_user_facebook_wall( $user_id, $provider, $hybridauth_user_profile )
{
    if( 'Facebook' != $provider )
    {
        return;
    }

    include_once( WORDPRESS_SOCIAL_LOGIN_ABS_PATH . '/hybridauth/Hybrid/Auth.php' );

    try
    {
        $provider = Hybrid_Auth::getAdapter( 'Facebook' );

        # https://developers.facebook.com/docs/graph-api/reference/v2.2/user/feed
        $response = $provider->api()->post( 'https://graph.facebook.com/v2.0/me/feed', array(
                'message' => 'This is a test message',
        ));
    }
    catch( Exception $e )
    {
        echo "Ooophs, we got an error: " . $e->getMessage();
    }
}
add_filter( 'wsl_hook_process_login_before_wp_set_auth_cookie', 'get_post_to_user_facebook_wall', 10, 3 );
</pre>
</br />
<div style="text-align: center;"><img style="width:650px;" src="assets/img/fbpostwall.png" ></div>
<div class="bs-callout bs-callout-info">
	<h4>Note:</h4>
	<p>
		Don't forget to ask users for a permission, otherwise Facebook will give you this error <code>(#200) The user hasn't authorized the application to perform this action</code>. See, <a href="developer-api-snippets.html">Code Snippets</a>.</p>
	</p>
</div>

<h3>2. Authentication Playground</h3>

<p>
	This tool will also give you a direct access to social networks apis via a lightweight console.
</p>

<div style="text-align: center;"><img style="width:950px;" src="assets/img/auth-play-1.png" ></div>
<br />
<div style="text-align: center;"><img src="assets/img/auth-play-2.png" ></div>
				<hr />
				<br />
				<a name="comments"></a>
				<div style="padding: 8px;background-color:#FAFAFA;border: 1px solid #ccc;padding: 10px;text-align:center;box-shadow: 0 1px 3px rgba(0,0,0,0.13);">
					<h4 style="border: 0px none; margin: 12px;">Please, do not submit issues here.</h4>

					<p>This comment section is for a general question and feedback. If you want to report a bug, please refer to the <a href="support.html">Support</a> section.</p>
				</div>
				<br />
				<div id="disqus_thread"></div>
				<script type="text/javascript">
					/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
					var disqus_shortname = 'miledgithubio'; // required: replace example with your forum shortname

					/* * * DON'T EDIT BELOW THIS LINE * * */
					(function() {
						var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
						dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
						(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
					})();
				</script>

				<br />
				<br />
			</div>
		</div>
	</div>

	<footer>
		<div class="container">
			<div class="row">
				<ul>
					<li><a href="./index.html">Home</a></li>
					<li><a href="./overview.html">Overview</a></li>
					<li><a href="./documentation.html">Documentation</a></li>
					<li><a href="./support.html">Support</a></li>
					<li><a href="./faq.html">FAQ</a></li>
				</ul>
			</div>
		</div>
	</footer>

	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-56230142-1', 'auto');
		ga('send', 'pageview');
	</script>
</body>
</html>
